# 데이터 모델링
## 1. 데이터 모델링
### 데이터 모델링의 이해
데이터 모델링 : 현실세계를 데이터베이스로 표현  
특징 : 추상화, 단순화, 명확성  
단계 : 개념적, 논리적, 물리적  

|단계|설명|
|---|---|
|개념적 모델링|전사적관점, 추상수준이 높음, 업무측면|
|논리적 모델링|재사용성|
|물리적 모델링|성능, 보안, 가용성 고려. 데이터베이스 구축|

ERD(Entity Relationship Diagram) : 엔터티 간의 관계를 정의하는 모델링  
엔터티를 도출 > 엔터티를 배치 > 관계 설정 > 관계 서술 > 관계 참여도 표현 > 관계의 필수 여부 표현  
고려사항 : 데이터모델의 독립성, 고객 요구사항의 표현, 데이터 품질 확보  
### 3층 스키마(3-Level Schema)
사용자, 설계자, 개발자가 데이터베이스를 보는 관점에 따라 데이터베이스를 기술하고 관계를 정의한 ANSI 표준  
데이터의 독립성을 확보하기 위한 방법 - 논리적독립성 / 물리적독립성  
구조 : 외부스키마, 개념스키마, 내부스키마  

|구조|설명|
|---|---|
|외부스키마|응용프로그램이 접근하는 데이터베이스|
|개념스키마|통합 데이터베이스 구조|
|내부스키마|물리적 저장구조|

### 엔터티(Entity)
업무에서 관리해야하는 데이터의 집합. 저장되고 관리되어야하는 데이터  
개념, 사건, 장소등의 명사  
고객의 비지니스 프로세스에서 관리되어야 하는 정보를 추출  

|특징|설명|
|---|---|
|식별자|유일한 식별자|
|인스턴스집합|2개이상의 인스턴스|
|속성|반드시 속성을 가지고 있음|
|관계|다른 엔터티와 최소 한 개 이상의 관계|
|업무|업무에서 관리되어야 하는 집합|

유형과 무형에 따른 종류

|종류|설명|
|---|---|
|유형 엔터티|지속적으로 사용되는 엔터티(고객, 강사, 사원)|
|개념 엔터티|물리적 형태가 없음(거래소 종목, 보험 상품)|
|무형 엔터티|비지니스 프로세슬 실행하면서 생성(주문, 취소, 청구)|

발생시점에 따른 종류


|종류|설명|
|---|---|
|기본 엔터티|키 엔터티, 독립적(고객, 상품, 부서)|
|중심 엔터티|기본과 행위의 중간(계좌, 주문, 취소)|
|기본 엔터티|2개 이상의 엔터티로부터 발생(주문 이력, 체결 이력)|

### 속성
업무에서 필요한 정보인 엔터티가 가지는 항목  
인스턴스의 구성요소, 더 이상 분해되지 않음  
특징 : 업무에서 관리되는 정보, 하나의 값만 가짐, 주 식별자에 함수적으로 종속됨.  

분해여부에 따른 속성의 종류


|종류|설명|
|---|---|
|단일 속성|하나의 의로 구성된 것(회원 ID, 이름)|
|복합 속성|여러개의 의미가 있는 것(주소 -> 시, 군, 동 으로 분해 )|
|다중값 속성|여려개의 값을 가질수 있는 것(상품 리스트 -> 엔터티로 분해)|

특성에 따른 속성의 종류


|종류|설명|
|---|---|
|기본 속성|본래의 속성(아이디, 일므, 계좌번호)|
|설계 속성|데이터 모델링 과정에서 발생되는 속성, 유일값을 부여(상품코드, 지점코드)|
|파생 속성|다른 속성에 의해 만들어지는 속성(합계, 평균)|

### 관계
엔터티간의 관련성  
존재 관계 : 두 개의 엔터티가 존재 여부의 관계가 있는 것 (고객이 관리점에 소속됨)
행위 관계 : 두 개의 엔터티가 어떤 행위에 의한 관련성이 있는 것 (계좌를 개설)
관계 차수 : 두 개의 엔터티 관계에 참여하는 수
* 1대1 관계 - 완전(반드시 존재), 선택적(하나 이하)
* 1대N 관계 - 엔터티 행이 하나 있을떄 여러개의 엔터티의 값이 있는 관계 (고객 - 계좌)
* M대N 관계 - 두개의 엔터티가 서로 여러개의 관계 (학생 - 과목) > M대N 의 관계를 1대N, N대1로 해소 해야함  
* 필수적, 선택적 관계 - 필수적 관계( **|** ), 선택적 관계( **O** )

식별 관계 : 기본키를 공유  
비식별 관게 : 일반 칼럼으로 관계를 가짐  
강한 계체 : 누구에게도 지배되지 않는 독립적인 개체  
약한 개쳬 : 다른 개체의 존재에 달려있는 개체

### 엔티티 식별자  
주식별자(기본키, Primary Key) : 유일성, 최소성, 엔터티를 대표

키의 종류

|데이터베이스 키|설명|
|---|---|
|기본키(Primary Key)|후보키 중에서 엔터티를 대표할 수 있는 키|
|후보키(Candidate Key)|유일성과 최소성을 만족하는 키|
|슈퍼키(Super Key)|유일성은 만족하지만 최소성(Not Null)은 만족하지 않는 키|
|대체키(Alternate Key)|여러 개의 후보키 중에서 기본키를 선정하고 남은 키|

식별자의 종류 : 대표성, 생성 여부, 속성의 수, 대체 여부
* 대표성 - 주식별자(참조관계 연결 가능) / 보조식별자
* 생성 여부 - 내부 식별자 / 외부 식별자
* 속성의 수 - 단일 식별자 / 복합 식별자
* 대체 여부 - 본질 식별자 / 인조 식별자

## 2. 데이터 모델과 성능
### 정규화
데이터의 일관성, 최소한의 데이터 중복, 최대한의 데이터 유연성을 위한 방법 : 데이터 분해    

|정규화절차|설명|
|---|---|
|제1정규화|속성의 원자성, 기본키 설정|
|제2정규화|부분 함수 종속성 제거, 기본키가 2개 이상##|
|제3정규화|이행 함수 종속성 제거 : 실질적으로 수행|
|BCNF|후보키가 기본키를 종속시키면 분해|
|제4정규화|다중 값 종속성 제거|
|제5정규화|조인에 의해 종속성 제거|

함수적 종속성 : x -> y 이면 y 는 x에 함수적으로 종속함

### 정규화와 성능
정규화의 문제점 : 데이터 모델의 유연성을 높이나 조회시에 조인(Join)을 유발하기 떄문에 CPU와 메모리를 많이 사용  
성능 튜닝 : 반정규화 - 조인이 최소화, 블록의 크기를 넘어 DISK IO 증가  

### 반정규화
데이터의 중복을 허용하고 조인을 줄이는 데이터베이스 성능 향상 방법  
조회속도는 향상, 데이터모델의 유연성을 낮아짐.  

|반정규화 절차|설명|
|---|---|
|대상 조사 및 검토|데이터 처리범위, 통계성등 조사|
|다른 방법 검토|클러스터링, 뷰, 인덱스 튜닝, 응용 프로그램, 파티션등 검토|
|반정규화 수행|테이블, 속성, 관계 등을 반정규화함|

반정규화 기법 : 계산된 칼럼 추가, 테이블 수직분할, 테이블 수평분할, 테이블 병합

### 분산 데이터베이스
물리적으로 떨어진 데이터베이스에 네트워크로 연결하여 단일 데이터베이스 이미지를 보여주고 분산된 작업처리를 수행하는 데이터베이스  
투명성 : 시스템이 네트워크로 분산되어 있음을 인식하지 못함.

|투명성|설명|
|---|---|
|분할 투명성|하나의 릴레이션이 여러 시스템에 저장되어 있음을 인식할 필요가 없음|
|위치 투명성|저장 장소를 명시할 필요가 없음, 동일한 명령으로 데이터에 접근 가능|
|지역 사상 투명성|지역 DBMS와 물적 데이터베이스 사이의 사싱이 보장|
|중복 투명성|객체가 여러시스템에 중복되어 있어도 일관성이 유지|
|장애 투명성|시스템이나 통신망에 이상이 있어도 무결성이 보장|
|병행 투명성|여러고객이 동시에 트랝젝션을 수행해도 이상이 없음|

설계방식 : 상향식 (지역 스키마 > 전역 스키마), 하향식(전역 스키마 > 지역 스키마)

|장점|단점|
|---|---|
|신뢰성 가용성|관리와 통제가 어려움|
|빠른 응답|무결성 관리|
|용량 확장|설계가 복잡|
